{"version":3,"sources":["../src/init.js"],"names":["allData","init","Promise","all","then","data","collectPages","forEach","item","push","pages","collectPagesFlat","flat","collectPagesFiltered","filter","clearitem","stats","type","path","includes","people","collectPagesReduced","map","url","service","host","title","section","sections","score","visits","sort","b","a","allTopEight","slice","allTopEight_enhanced","Object","values","results","media","images","index","href","imageHref","promo","defaultPromoImage","blocks","model","locator","altText","imageAlt","text","lastPublished","Date","metadata","timestamp","translatedTitle","translations","africaTopEight","africaTopEight_enhanced","undefined","error","console","log","asiaPacificTopEight","asiaPacificTopEight_enhanced","asiaSouthTopEight","asiaSouthTopEight_enhanced","europeTopEight","europeTopEight_enhanced","americasTopEight","americasTopEight_enhanced","middleEastTopEight","middleEastTopEight_enhanced","length"],"mappings":"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","sourcesContent":["import getChartbeatApiData from \"./helpers/chartbeatApi\";\nimport getContentApiData from \"./helpers/contentApi\";\nimport translateString from \"./helpers/microsoftTranslatorApi\";\nimport convertTime from \"./helpers/convertTime\";\n\nconst allData = [];\n\nconst init = () => {\n  Promise.all([\n    getChartbeatApiData(\"afaanoromoo\"),\n    getChartbeatApiData(\"amharic\"),\n    getChartbeatApiData(\"afrique\"),\n    getChartbeatApiData(\"hausa\"),\n    getChartbeatApiData(\"igbo\"),\n    getChartbeatApiData(\"gahuza\"),\n    getChartbeatApiData(\"pidgin\"),\n    getChartbeatApiData(\"somali\"),\n    getChartbeatApiData(\"swahili\"),\n    getChartbeatApiData(\"tigrinya\"),\n    getChartbeatApiData(\"yoruba\"),\n    //getChartbeatApiData(\"kyrgyz\"),\n    //getChartbeatApiData(\"uzbek\"),\n    getChartbeatApiData(\"burmese\"),\n    getChartbeatApiData(\"zhongwen\"),\n    getChartbeatApiData(\"indonesian\"),\n    getChartbeatApiData(\"japanese\"),\n    getChartbeatApiData(\"korean\"),\n    getChartbeatApiData(\"thai\"),\n    getChartbeatApiData(\"vietnamese\"),\n    getChartbeatApiData(\"bengali\"),\n    getChartbeatApiData(\"gujarati\"),\n    getChartbeatApiData(\"hindi\"),\n    getChartbeatApiData(\"marathi\"),\n    getChartbeatApiData(\"nepali\"),\n    getChartbeatApiData(\"pashto\"),\n    getChartbeatApiData(\"punjabi\"),\n    getChartbeatApiData(\"sinhala\"),\n    getChartbeatApiData(\"tamil\"),\n    getChartbeatApiData(\"telugu\"),\n    getChartbeatApiData(\"urdu\"),\n    getChartbeatApiData(\"azeri\"),\n    getChartbeatApiData(\"russian\"),\n    getChartbeatApiData(\"serbian\"),\n    getChartbeatApiData(\"turkish\"),\n    getChartbeatApiData(\"ukrainian\"),\n    getChartbeatApiData(\"brasil\"),\n    getChartbeatApiData(\"mundo\"),\n    getChartbeatApiData(\"arabic\"),\n    getChartbeatApiData(\"persian\"),\n  ])\n    // .then((responses) => {\n    //   return Promise.all(\n    //     responses.map((response) => {\n    //       return response;\n    //     })\n    //   );\n    // })\n    .then((data) => {\n      //push all pages arrays into an empty array\n\n      const collectPages = [];\n      data.forEach((item) => {\n        collectPages.push(item.pages);\n      });\n      //flatten array and remove pages that are out of scope\n\n      const collectPagesFlat = collectPages.flat();\n      const collectPagesFiltered = collectPagesFlat.filter(\n        (item) =>\n          clearitem.stats.type !== \"LandingPage\" &&\n          !item.path.includes(`topics`) &&\n          !item.path.includes(`live`) &&\n          !item.path.includes(`programmes`) &&\n          !item.path.includes(`extra`) &&\n          !item.path.includes(`_radio`) &&\n          item.stats.people > 19\n      );\n\n      //create new array with objects containing just relevant properties, plus a score property to identify the stories that perform best\n\n      const collectPagesReduced = collectPagesFiltered.map((item) => {\n        return {\n          url: item.path,\n          service: item.host,\n          title: item.title,\n          section: item.sections[0],\n          score: item.stats.new / item.stats.visits,\n        };\n      });\n\n      //sort array to bring the best performing stories, based on their score, at the top of the list\n      collectPagesReduced.sort((b, a) =>\n        a.score > b.score ? 1 : b.score > a.score ? -1 : 0\n      );\n\n      //select the top eight articles across all services\n      const allTopEight = collectPagesReduced.slice(0, 8);\n\n      //enhance the articles object with additional properties from Content API (image, alt) or from the relevant json file and translate article title with Microsoft Translator API\n      const allTopEight_enhanced = allTopEight.map((item) => {\n        const url = item.url.slice(8);\n        getContentApiData(url).then((data) => {\n          // item.imageHref = Object.values(\n          //   data.results[0].media.images.index\n          // )[0].href;\n          // item.imageAlt = Object.values(\n          //   data.results[0].media.images.index\n          // )[0].altText;\n          // item.lastPublished = convertTime(data.results[0].lastPublished);\n\n          Object.values(data.results[0].media.images.index)[0].href\n            ? (item.imageHref = Object.values(\n                data.results[0].media.images.index\n              )[0].href)\n            : (item.imageHref = `https://ichef.bbci.co.uk/news/800/cpsprodpb/${data.promo.images.defaultPromoImage.blocks[2].model.locator}`);\n\n          Object.values(data.results[0].media.images.index)[0].altText\n            ? (item.imageAlt = Object.values(\n                data.results[0].media.images.index\n              )[0].altText)\n            : (item.imageAlt =\n                data.promo.images.defaultPromoImage.blocks[1].model.blocks[0].model.blocks[0].model.text);\n\n          convertTime(data.results[0].lastPublished)\n            ? (item.lastPublished = convertTime(data.results[0].lastPublished))\n            : (item.lastPublished = convertTime(\n                new Date(data.metadata.timestamp)\n              ));\n        });\n        translateString([{ text: item.title }], item.section).then((data) => {\n          if (data) {\n            item.translatedTitle = data[0].translations[0].text;\n          } else {\n            item.translatedTitle = item.title;\n          }\n        });\n      });\n\n      //create arrays of top eight articles for various WS regions, following the same logic as for general top eight\n\n      const africaTopEight = collectPagesReduced\n        .filter((item) => {\n          if (\n            item.service === \"amharic.bbc.co.uk\" ||\n            item.service === \"afrique.bbc.co.uk\" ||\n            item.service === \"amharic.bbc.co.uk\" ||\n            item.service === \"afaanoromoo.bbc.co.uk\" ||\n            item.service === \"hausa.bbc.co.uk\" ||\n            item.service === \"igbo.bbc.co.uk\" ||\n            item.service === \"gahuza.bbc.co.uk\" ||\n            item.service === \"pidgin.bbc.co.uk\" ||\n            item.service === \"somali.bbc.co.uk\" ||\n            item.service === \"swahili.bbc.co.uk\" ||\n            item.service === \"tigrinya.bbc.co.uk\" ||\n            item.service === \"yoruba.bbc.co.uk\"\n          )\n            return item;\n        })\n        .slice(0, 8);\n\n      const africaTopEight_enhanced = africaTopEight.map((item) => {\n        const url = item.url.slice(8);\n        getContentApiData(url).then((data) => {\n          // item.imageHref = Object.values(\n          //   data.results[0].media.images.index\n          // )[0].href;\n          // item.imageAlt = Object.values(\n          //   data.results[0].media.images.index\n          // )[0].altText;\n          // item.lastPublished = convertTime(data.results[0].lastPublished);\n\n          Object.values(data.results[0].media.images.index)[0].href\n            ? (item.imageHref = Object.values(\n                data.results[0].media.images.index\n              )[0].href)\n            : (item.imageHref = `https://ichef.bbci.co.uk/news/800/cpsprodpb/${data.promo.images.defaultPromoImage.blocks[2].model.locator}`);\n\n          Object.values(data.results[0].media.images.index)[0].altText\n            ? (item.imageAlt = Object.values(\n                data.results[0].media.images.index\n              )[0].altText)\n            : (item.imageAlt =\n                data.promo.images.defaultPromoImage.blocks[1].model.blocks[0].model.blocks[0].model.text);\n\n          convertTime(data.results[0].lastPublished)\n            ? (item.lastPublished = convertTime(data.results[0].lastPublished))\n            : (item.lastPublished = convertTime(\n                new Date(data.metadata.timestamp)\n              ));\n        });\n        try {\n          translateString([{ text: item.title }]).then((data) => {\n            data !== undefined\n              ? (item.translatedTitle = data[0].translations[0].text)\n              : (item.translatedTitle = item.title);\n          });\n        } catch (error) {\n          console.log(\n            `An error has occurred when trying to translate string: ${error}`\n          );\n        }\n      });\n\n      // const asiaCentralTopEight = collectPagesReduced\n      //   .filter((item) => {\n      //     if (\n      //       item.service === \"uzbek.bbc.co.uk\" ||\n      //       item.service === \"kyrgyz.bbc.co.uk\"\n      //     )\n      //       return item;\n      //   })\n      //   .slice(0, 8);\n\n      // const asiaCentralTopEight_enhanced = asiaCentralTopEight.map((item) => {\n      //   const url = item.url.slice(8);\n      //   getContentApiData(url).then((data) => {\n      // item.imageHref = Object.values(\n      //   data.results[0].media.images.index\n      // )[0].href;\n      // item.imageAlt = Object.values(\n      //   data.results[0].media.images.index\n      // )[0].altText;\n      // item.lastPublished = convertTime(data.results[0].lastPublished);\n\n      //     Object.values(data.results[0].media.images.index)[0].href\n      //       ? (item.imageHref = Object.values(\n      //           data.results[0].media.images.index\n      //         )[0].href)\n      //       : (item.imageHref = `https://ichef.bbci.co.uk/news/800/cpsprodpb/${data.promo.images.defaultPromoImage.blocks[2].model.locator}`);\n\n      //     Object.values(data.results[0].media.images.index)[0].altText\n      //       ? (item.imageAlt = Object.values(\n      //           data.results[0].media.images.index\n      //         )[0].altText)\n      //       : (item.imageAlt =\n      //           data.promo.images.defaultPromoImage.blocks[1].model.blocks[0].model.blocks[0].model.text);\n\n      //     convertTime(data.results[0].lastPublished)\n      //       ? (item.lastPublished = convertTime(data.results[0].lastPublished))\n      //       : (item.lastPublished = convertTime(\n      //           new Date(data.metadata.timestamp)\n      //         ));\n      //   });\n      //   translateString([{ text: item.title }]).then((data) => {\n      //     item.translatedTitle = data[0].translations[0].text;\n      //   });\n      // });\n\n      const asiaPacificTopEight = collectPagesReduced\n        .filter((item) => {\n          if (\n            item.service === \"burmese.bbc.co.uk\" ||\n            item.service === \"zhongwen.bbc.co.uk\" ||\n            item.service === \"indonesia.bbc.co.uk\" ||\n            item.service === \"japanese.bbc.co.uk\" ||\n            item.service === \"korean.bbc.co.uk\" ||\n            item.service === \"thai.bbc.co.uk\" ||\n            item.service === \"vietnamese.bbc.co.uk\"\n          )\n            return item;\n        })\n        .slice(0, 8);\n\n      const asiaPacificTopEight_enhanced = asiaPacificTopEight.map((item) => {\n        const url = item.url.slice(8);\n        getContentApiData(url).then((data) => {\n          // item.imageHref = Object.values(\n          //   data.results[0].media.images.index\n          // )[0].href;\n          // item.imageAlt = Object.values(\n          //   data.results[0].media.images.index\n          // )[0].altText;\n          // item.lastPublished = convertTime(data.results[0].lastPublished);\n\n          Object.values(data.results[0].media.images.index)[0].href\n            ? (item.imageHref = Object.values(\n                data.results[0].media.images.index\n              )[0].href)\n            : (item.imageHref = `https://ichef.bbci.co.uk/news/800/cpsprodpb/${data.promo.images.defaultPromoImage.blocks[2].model.locator}`);\n\n          Object.values(data.results[0].media.images.index)[0].altText\n            ? (item.imageAlt = Object.values(\n                data.results[0].media.images.index\n              )[0].altText)\n            : (item.imageAlt =\n                data.promo.images.defaultPromoImage.blocks[1].model.blocks[0].model.blocks[0].model.text);\n\n          convertTime(data.results[0].lastPublished)\n            ? (item.lastPublished = convertTime(data.results[0].lastPublished))\n            : (item.lastPublished = convertTime(\n                new Date(data.metadata.timestamp)\n              ));\n        });\n        translateString([{ text: item.title }]).then((data) => {\n          data !== undefined\n            ? (item.translatedTitle = data[0].translations[0].text)\n            : (item.translatedTitle = item.title);\n        });\n      });\n\n      const asiaSouthTopEight = collectPagesReduced\n        .filter((item) => {\n          if (\n            item.service === \"bengali.bbc.co.uk\" ||\n            item.service === \"bengali.bbc.co.uk\" ||\n            item.service === \"gujarati.bbc.co.uk\" ||\n            item.service === \"hindi.bbc.co.uk\" ||\n            item.service === \"marathi.bbc.co.uk\" ||\n            item.service === \"nepali.bbc.co.uk\" ||\n            item.service === \"pashto.bbc.co.uk\" ||\n            item.service === \"punjabi.bbc.co.uk\" ||\n            item.service === \"sinhala.bbc.co.uk\" ||\n            item.service === \"tamil.bbc.co.uk\" ||\n            item.service === \"telugu.bbc.co.uk\" ||\n            item.service === \"urdu.bbc.co.uk\"\n          )\n            return item;\n        })\n        .slice(0, 8);\n\n      const asiaSouthTopEight_enhanced = asiaSouthTopEight.map((item) => {\n        const url = item.url.slice(8);\n        getContentApiData(url).then((data) => {\n          // item.imageHref = Object.values(\n          //   data.results[0].media.images.index\n          // )[0].href;\n          // item.imageAlt = Object.values(\n          //   data.results[0].media.images.index\n          // )[0].altText;\n          // item.lastPublished = convertTime(data.results[0].lastPublished);\n\n          Object.values(data.results[0].media.images.index)[0].href\n            ? (item.imageHref = Object.values(\n                data.results[0].media.images.index\n              )[0].href)\n            : (item.imageHref = `https://ichef.bbci.co.uk/news/800/cpsprodpb/${data.promo.images.defaultPromoImage.blocks[2].model.locator}`);\n\n          Object.values(data.results[0].media.images.index)[0].altText\n            ? (item.imageAlt = Object.values(\n                data.results[0].media.images.index\n              )[0].altText)\n            : (item.imageAlt =\n                data.promo.images.defaultPromoImage.blocks[1].model.blocks[0].model.blocks[0].model.text);\n\n          convertTime(data.results[0].lastPublished)\n            ? (item.lastPublished = convertTime(data.results[0].lastPublished))\n            : (item.lastPublished = convertTime(\n                new Date(data.metadata.timestamp)\n              ));\n        });\n        translateString([{ text: item.title }]).then((data) => {\n          data[0].translations !== undefined\n            ? (item.translatedTitle = data[0].translations[0].text)\n            : (item.translatedTitle = item.title);\n        });\n      });\n\n      const europeTopEight = collectPagesReduced\n        .filter((item) => {\n          if (\n            item.service === \"azeri.bbc.co.uk\" ||\n            item.service === \"russian.bbc.co.uk\" ||\n            item.service === \"serbian.bbc.co.uk\" ||\n            item.service === \"turkish.bbc.co.uk\" ||\n            item.service === \"ukrainian.bbc.co.uk\"\n          )\n            return item;\n        })\n        .slice(0, 8);\n\n      const europeTopEight_enhanced = europeTopEight.map((item) => {\n        const url = item.url.slice(8);\n        getContentApiData(url).then((data) => {\n          // item.imageHref = Object.values(\n          //   data.results[0].media.images.index\n          // )[0].href;\n          // item.imageAlt = Object.values(\n          //   data.results[0].media.images.index\n          // )[0].altText;\n          // item.lastPublished = convertTime(data.results[0].lastPublished);\n\n          Object.values(data.results[0].media.images.index)[0].href\n            ? (item.imageHref = Object.values(\n                data.results[0].media.images.index\n              )[0].href)\n            : (item.imageHref = `https://ichef.bbci.co.uk/news/800/cpsprodpb/${data.promo.images.defaultPromoImage.blocks[2].model.locator}`);\n\n          Object.values(data.results[0].media.images.index)[0].altText\n            ? (item.imageAlt = Object.values(\n                data.results[0].media.images.index\n              )[0].altText)\n            : (item.imageAlt =\n                data.promo.images.defaultPromoImage.blocks[1].model.blocks[0].model.blocks[0].model.text);\n\n          convertTime(data.results[0].lastPublished)\n            ? (item.lastPublished = convertTime(data.results[0].lastPublished))\n            : (item.lastPublished = convertTime(\n                new Date(data.metadata.timestamp)\n              ));\n        });\n        translateString([{ text: item.title }]).then((data) => {\n          data !== undefined\n            ? (item.translatedTitle = data[0].translations[0].text)\n            : (item.translatedTitle = item.title);\n        });\n      });\n\n      const americasTopEight = collectPagesReduced\n        .filter((item) => {\n          if (\n            item.service === \"mundo.bbc.co.uk\" ||\n            item.service === \"brasil.bbc.co.uk\"\n          )\n            return item;\n        })\n        .slice(0, 8);\n\n      const americasTopEight_enhanced = americasTopEight.map((item) => {\n        const url = item.url.slice(8);\n        getContentApiData(url).then((data) => {\n          // item.imageHref = Object.values(\n          //   data.results[0].media.images.index\n          // )[0].href;\n          // item.imageAlt = Object.values(\n          //   data.results[0].media.images.index\n          // )[0].altText;\n          // item.lastPublished = convertTime(data.results[0].lastPublished);\n\n          Object.values(data.results[0].media.images.index)[0].href\n            ? (item.imageHref = Object.values(\n                data.results[0].media.images.index\n              )[0].href)\n            : (item.imageHref = `https://ichef.bbci.co.uk/news/800/cpsprodpb/${data.promo.images.defaultPromoImage.blocks[2].model.locator}`);\n\n          Object.values(data.results[0].media.images.index)[0].altText\n            ? (item.imageAlt = Object.values(\n                data.results[0].media.images.index\n              )[0].altText)\n            : (item.imageAlt =\n                data.promo.images.defaultPromoImage.blocks[1].model.blocks[0].model.blocks[0].model.text);\n\n          convertTime(data.results[0].lastPublished)\n            ? (item.lastPublished = convertTime(data.results[0].lastPublished))\n            : (item.lastPublished = convertTime(\n                new Date(data.metadata.timestamp)\n              ));\n        });\n        translateString([{ text: item.title }]).then((data) => {\n          data !== undefined\n            ? (item.translatedTitle = data[0].translations[0].text)\n            : (item.translatedTitle = item.title);\n        });\n      });\n\n      const middleEastTopEight = collectPagesReduced\n        .filter((item) => {\n          if (\n            item.service === \"arabic.bbc.co.uk\" ||\n            item.service === \"persian.bbc.co.uk\"\n          )\n            return item;\n        })\n        .slice(0, 8);\n\n      const middleEastTopEight_enhanced = middleEastTopEight.map((item) => {\n        const url = item.url.slice(8);\n        getContentApiData(url).then((data) => {\n          // item.imageHref = Object.values(\n          //   data.results[0].media.images.index\n          // )[0].href;\n          // item.imageAlt = Object.values(\n          //   data.results[0].media.images.index\n          // )[0].altText;\n          // item.lastPublished = convertTime(data.results[0].lastPublished);\n\n          Object.values(data.results[0].media.images.index)[0].href\n            ? (item.imageHref = Object.values(\n                data.results[0].media.images.index\n              )[0].href)\n            : (item.imageHref = `https://ichef.bbci.co.uk/news/800/cpsprodpb/${data.promo.images.defaultPromoImage.blocks[2].model.locator}`);\n\n          Object.values(data.results[0].media.images.index)[0].altText\n            ? (item.imageAlt = Object.values(\n                data.results[0].media.images.index\n              )[0].altText)\n            : (item.imageAlt =\n                data.promo.images.defaultPromoImage.blocks[1].model.blocks[0].model.blocks[0].model.text);\n\n          convertTime(data.results[0].lastPublished)\n            ? (item.lastPublished = convertTime(data.results[0].lastPublished))\n            : (item.lastPublished = convertTime(\n                new Date(data.metadata.timestamp)\n              ));\n        });\n        translateString([{ text: item.title }]).then((data) => {\n          data !== undefined\n            ? (item.translatedTitle = data[0].translations[0].text)\n            : (item.translatedTitle = item.title);\n        });\n      });\n\n      allData.length = 0;\n\n      allData.push(\n        allTopEight,\n        africaTopEight,\n        //asiaCentralTopEight,\n        asiaPacificTopEight,\n        asiaSouthTopEight,\n        europeTopEight,\n        americasTopEight,\n        middleEastTopEight\n      );\n    })\n    .catch(function (error) {\n      // if there's an error, log it\n      console.log(error);\n    });\n};\n\nexport { init, allData };\n"],"file":"init.js"}